{% extends 'base.html' %}
{% load static %}

{% block title %}Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¯Ù…ØºØ©{% endblock %}

{% block content %}

<div class="max-w-3xl mx-auto bg-white p-10 mt-20 shadow-xl rounded-2xl border border-gray-200">

    <h2 class="text-3xl font-bold text-gray-800 mb-8 flex items-center gap-2">
        <span class="text-green-600 text-4xl">â•</span>
        Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¯Ù…ØºØ© Ø¬Ø¯ÙŠØ¯
    </h2>

    <!-- ğŸ”¥ Display global validation errors (non-field errors) -->
    {% if form.non_field_errors %}
        <div class="bg-red-100 border border-red-300 text-red-700 p-4 mb-6 rounded-lg">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}

    <form method="POST" class="space-y-6">
        {% csrf_token %}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Ø§Ù„Ø´Ø±ÙƒØ© -->
            <div>
                <label class="font-semibold text-gray-700">Ø§Ù„Ø´Ø±ÙƒØ©</label>
                {{ form.company }}

                {% if form.company.errors %}
                    <p class="text-red-600 mt-2 text-sm">
                        {{ form.company.errors.0 }}
                    </p>
                {% endif %}
            </div>

            <!-- Ø´Ø±ÙƒØ© Ø¬Ø¯ÙŠØ¯Ø© -->
            <div class="">
                <div class="">
                    <label class="font-semibold text-gray-700">Ø´Ø±ÙƒØ© Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    {{ form.new_company_name }}
                    {% if form.new_company_name.errors %}
                        <p class="text-red-600 mt-2 text-sm">{{ form.new_company_name.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…Ù„ -->
            <div>
                <label class="font-semibold text-gray-700">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…Ù„</label>
                {{ form.value_of_work }}
                {% if form.value_of_work.errors %}
                    <p class="text-red-600 mt-2 text-sm">{{ form.value_of_work.errors.0 }}</p>
                {% endif %}
            </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø® -->
            <div>
                <label class="font-semibold text-gray-700">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø®</label>
                {{ form.invoice_copies }}
                {% if form.invoice_copies.errors %}
                    <p class="text-red-600 mt-2 text-sm">{{ form.invoice_copies.errors.0 }}</p>
                {% endif %}
            </div>
                    <!-- Ø³Ù†Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© -->
            <div>
                <label class="font-semibold text-gray-700">Ø³Ù†Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>
                {{ form.invoice_date }}
                {% if form.invoice_date.errors %}
                    <p class="text-red-600 mt-2 text-sm">{{ form.invoice_date.errors.0 }}</p>
                {% endif %}
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù…ØºØ© -->
            <div>
                <label class="font-semibold text-gray-700">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù…ØºØ©</label>
                {{ form.stamp_rate }}
                {% if form.stamp_rate.errors %}
                    <p class="text-red-600 mt-2 text-sm">{{ form.stamp_rate.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù -->
            <div>
                <label class="font-semibold text-gray-700">Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù</label>
                {{ form.exchange_rate }}
                {% if form.exchange_rate.errors %}
                    <p class="text-red-600 mt-2 text-sm">{{ form.exchange_rate.errors.0 }}</p>
                {% endif %}
            </div>
        </div>
        <!-- Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
        <div>
            <label class="font-semibold text-gray-700">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
            {{ form.note }}
            {% if form.note.errors %}
                <p class="text-red-600 mt-2 text-sm">{{ form.note.errors.0 }}</p>
            {% endif %}
        </div>

        <!-- Live Calculation Results -->
        <div class="mt-10 p-5 bg-green-50 rounded-xl border border-green-200 space-y-3">

            <h3 class="text-xl font-bold text-green-700 mb-3">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h3>

            <p class="text-gray-700 font-semibold">
                Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ù…ØºÙ‡ Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø©: <span id="d1-value" class="text-green-700 font-bold">0</span>
            </p>

        </div>


        <!-- buttons -->
        <div class="flex justify-between pt-6">
            <a href="{% url 'stamp_list' %}"
               class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition font-semibold">
                Ø±Ø¬ÙˆØ¹
            </a>

            <button
                class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-semibold shadow-lg">
                Ø­ÙØ¸
            </button>
        </div>

    </form>
</div>

{% endblock %}
