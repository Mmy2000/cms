{% extends 'base.html' %}
{% load static %}

{% block content %}
<section dir="rtl" class="max-w-6xl mx-auto px-6 py-12">

  <div class="my-3">
    {% include "includes/alerts.html" %}
      </div>
  <!-- Page Header -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-10 gap-4">
    <h1 class="text-3xl font-bold text-gray-900 ">ğŸ“š Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h1>

    <!-- Sorting Form -->
    <form method="get" class="flex items-center gap-2">
      <label for="sort" class="text-gray-700  text-sm font-medium">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨:</label>
      <select name="sort" id="sort" class="select select-success">
        <option value="title" {% if request.GET.sort == "title" %}selected{% endif %}>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</option>
        <option value="newest" {% if request.GET.sort == "newest" %}selected{% endif %}>Ø§Ù„Ø£Ø­Ø¯Ø«</option>
        <option value="oldest" {% if request.GET.sort == "oldest" %}selected{% endif %}>Ø§Ù„Ø£Ù‚Ø¯Ù…</option>
      </select>
      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-xl px-4 py-2 transition">
        ØªØ·Ø¨ÙŠÙ‚
      </button>
    </form>
  </div>

  <!-- Topics Grid -->
  {% if topics %}
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for topic in topics %}
        <a href="{% url 'content_detail' id=topic.id %}"
           class="group block bg-white  border border-gray-200  rounded-2xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
          {% if topic.image %}
            <img src="{{ topic.image.url }}" alt="{{ topic.title }}" class="rounded-lg mb-4 h-48 w-full object-cover">
            {% else %}
              <img src="/static/default.jpg" alt="{{ sub.title }}" class="rounded-lg mb-4 h-40 w-full object-cover">
          {% endif %}
          <h2 class="text-xl font-bold text-gray-900  mb-2 group-hover:text-blue-600 transition">
            {{ topic.title }}
          </h2>
          {% if topic.description %}
            <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-3">
              {{ topic.description|truncatewords:30 }}
            </p>
          {% endif %}
          <p class="text-gray-400 text-xs mt-3">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©: {{ topic.created_at|date:"Y-m-d" }}</p>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-xl p-4 text-center mt-10">
      Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹.
    </div>
  {% endif %}

</section>
{% endblock %}
